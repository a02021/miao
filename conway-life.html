<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="grid"></div>
<button id="next">Next generation</button>
<p></p>
<script>
  // Your code here.
  let checkbox = []
  let grid = document.querySelector("div")
  for (let y = 0; y < 10; y++) {
    let row = document.createElement("span")
    grid.appendChild(row)
    for (let x = 0; x < 10; x++) {
      let box = document.createElement("input");
      box.type = "checkbox";
      box.name = x + y * 10;
      box.checked = Math.round(Math.random()*0.7)  //随机0或1
      row.appendChild(box)
      checkbox.push(box);
      //console.log(checkbox[x+y*10].checked)  //true or false
    }
    let brr = document.createElement("br")
    grid.appendChild(brr)
  }
  console.log(checkbox)
  function clickNext() {
    let liveNext = []
    let diedNext = []
    for (let y = 0; y < 10; y++) {
      for (let x = 0; x < 10; x++) {
        let now = x + y * 10
        let count = 0
        let neighbor = [-11, -10, -9, -1, +1, +9, +10, +11]
        if (x == 0) { neighbor = [-10, -9, +1, +10, +11] }
        if (x == 9) { neighbor = [-11, -10, -1, +9, +10] }
          for (let i in neighbor) {
            if (now + neighbor[i] >= 0 && now + neighbor[i] < 100 ) {
              if (checkbox[(now + neighbor[i])].checked) {
              count++
              }
            }
          }
          //console.log('count',x+y*10,count)
        //少于两个或多于三个的活着的邻居，都会死亡
        if (checkbox[now].checked){
          if (count < 2 || count > 3) {
            diedNext.push(now)
          }
        }
      //死去的细胞，周围有三个活着的邻居，可以再次复活。
        if (!checkbox[now].checked) {
          if (count == 3) {
            liveNext.push(now)
          }
        }
      }
    }
    for (let i of liveNext) {
      checkbox[i].checked = true
    }
    for (let i of diedNext) {
      checkbox[i].checked = false
    }
  }
  
  let button = document.querySelector("button")
  let a = 0
  let p = document.querySelector('p')
  button.addEventListener(
    "click", () => {
      clickNext()
      a++
      p.innerHTML = '第'+ a +'代'
    }
  )

</script>
</body>
</html>